<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Tropo::Generator</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (G)</a> &raquo; 
    <span class='title'><a href="../Tropo.html" title="Tropo (module)">Tropo</a></span>
     &raquo; 
    <span class="title">Generator</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Tropo::Generator 
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><a href="../Object.html" title="Object (class)">Object</a></span>
      
        <ul class="fullTree">
          <li><a href="../Object.html" title="Object (class)">Object</a></li>
          
            <li class="next">Tropo::Generator</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><a href="Helpers.html" title="Tropo::Helpers (module)">Helpers</a></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/tropo-webapi-ruby/tropo-webapi-ruby.rb</dd>
  
</dl>
<div class="clear"></div>



  
  
  
  
  <h2>Instance Attribute Summary</h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#recognizer-instance_method" title="#recognizer (instance method)">- (Object) <strong>recognizer</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set a couple of Booleans to indicate the session type as a convenience Set
a default voice for speech synthesis Set a default recognizer for speech
recognition.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#text_session-instance_method" title="#text_session (instance method)">- (Object) <strong>text_session</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set a couple of Booleans to indicate the session type as a convenience Set
a default voice for speech synthesis Set a default recognizer for speech
recognition.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#voice-instance_method" title="#voice (instance method)">- (Object) <strong>voice</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set a couple of Booleans to indicate the session type as a convenience Set
a default voice for speech synthesis Set a default recognizer for speech
recognition.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#voice_session-instance_method" title="#voice_session (instance method)">- (Object) <strong>voice_session</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set a couple of Booleans to indicate the session type as a convenience Set
a default voice for speech synthesis Set a default recognizer for speech
recognition.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>Class Method Summary</h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#method_missing-class_method" title="method_missing (class method)">+ (Object) <strong>method_missing</strong>(method_id, *args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>Instance Method Summary</h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ask-instance_method" title="#ask (instance method)">- (String<sup>?</sup>) <strong>ask</strong>(params = {}, &amp;block) </a>
    

    
      (also: #prompt)
    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Prompts the user (audio file or text to speech) and optionally waits for a
response from the user.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#call-instance_method" title="#call (instance method)">- (String<sup>?</sup>) <strong>call</strong>(params = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Prompts initiates a new call.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#choices-instance_method" title="#choices (instance method)">- (Object) <strong>choices</strong>(params = {}) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Choices to give the user on input.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#conference-instance_method" title="#conference (instance method)">- (String<sup>?</sup>) <strong>conference</strong>(params = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates a conference or pushes a user to an existing conference.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hangup-instance_method" title="#hangup (instance method)">- (String<sup>?</sup>) <strong>hangup</strong> </a>
    

    
      (also: #disconnect)
    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
This function instructs Tropo to &quot;hang-up&quot; or disconnect the
current session.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Object) <strong>initialize</strong>(params = {}, &amp;block) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Initializes the Generator class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#message-instance_method" title="#message (instance method)">- (String<sup>?</sup>) <strong>message</strong>(params = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Message initiates a new message to a destination and then hangs up on that
destination.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on-instance_method" title="#on (instance method)">- (Object) <strong>on</strong>(params = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Sets event handlers to call a REST resource when a particular event occurs.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse-instance_method" title="#parse (instance method)">- (Hash) <strong>parse</strong>(json_string) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Parses the JSON string recieved from Tropo into a Ruby Hash.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#record-instance_method" title="#record (instance method)">- (Object) <strong>record</strong>(params = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Plays a prompt (audio file or text to speech) and optionally waits for a
response from the caller that is recorded.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#redirect-instance_method" title="#redirect (instance method)">- (String<sup>?</sup>) <strong>redirect</strong>(params = {}) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The redirect function forwards an incoming call to another destination /
phone number before answering it.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reject-instance_method" title="#reject (instance method)">- (String<sup>?</sup>) <strong>reject</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Allows Tropo applications to reject incoming calls before they are
answered.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset-instance_method" title="#reset (instance method)">- (nil) <strong>reset</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Resets the action hash if one desires to reuse the same Generator object.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#response-instance_method" title="#response (instance method)">- (String) <strong>response</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Renders the JSON string to be sent to Tropo to execute a set of actions.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#say-instance_method" title="#say (instance method)">- (Object) <strong>say</strong>(value = nil, params = {}) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Plays a prompt (audio file, text to speech or text for IM/SMS).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_recording-instance_method" title="#start_recording (instance method)">- (String<sup>?</sup>) <strong>start_recording</strong>(params = {}) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Allows Tropo applications to begin recording the current session.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop_recording-instance_method" title="#stop_recording (instance method)">- (String<sup>?</sup>) <strong>stop_recording</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Stops the recording of the current session after startCallRecording has
been called.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transfer-instance_method" title="#transfer (instance method)">- (nil, String) <strong>transfer</strong>(params = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Transfers an already answered call to another destination / phone number.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>initialize</strong> </span>
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>initialize</strong>(params) </span>
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>initialize</strong>(params, &amp;block) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Initializes the Generator class
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>initialize</strong>(params) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>voice</span>
      
      
      
        &mdash;
        <div class='inline'><p>
sets the value of the default voice
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><a href="../Object.html" title="Object (class)">Object</a></tt>)</span>
      
      
        <span class='name'>pass</span>
      
      
      
        &mdash;
        <div class='inline'><p>
in an object that may be accessed inside the block
</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>initialize</strong>(params, &amp;block) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><a href="../Object.html" title="Object (class)">Object</a></tt>)</span>
      
      
        <span class='name'>pass</span>
      
      
      
        &mdash;
        <div class='inline'><p>
in an object that may be accessed inside the block
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>voice</span>
      
      
      
        &mdash;
        <div class='inline'><p>
sets the value of the default voice
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
        <span class='name'>a</span>
      
      
      
        &mdash;
        <div class='inline'><p>
block of code to execute (optional)
</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37
38
39
40
41
42
43
44
45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 35</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@response ivar id'>@response</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='symbol val'>:tropo</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Array constant id'>Array</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='rbrace token'>}</span>
  <span class='@voice ivar id'>@voice</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:voice</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:voice</span><span class='rbrack token'>]</span>
  <span class='@recognizer ivar id'>@recognizer</span> <span class='assign token'>=</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:recognizer</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:recognizer</span><span class='rbrack token'>]</span>
  
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='comment val'># Lets us know were are in the midst of building a block, so we only rendor the JSON</span>
    <span class='comment val'># response at the end of executing the block, rather than at each action</span>
    <span class='@building ivar id'>@building</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='instance_exec identifier id'>instance_exec</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='render_response identifier id'>render_response</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="recognizer=-instance_method"></span>
      <span id="recognizer-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="recognizer-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>recognizer</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set a couple of Booleans to indicate the session type as a convenience Set
a default voice for speech synthesis Set a default recognizer for speech
recognition
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 10</span>

<span class='def def kw'>def</span> <span class='recognizer identifier id'>recognizer</span>
  <span class='@recognizer ivar id'>@recognizer</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="text_session-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="text_session-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>text_session</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set a couple of Booleans to indicate the session type as a convenience Set
a default voice for speech synthesis Set a default recognizer for speech
recognition
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 10</span>

<span class='def def kw'>def</span> <span class='text_session identifier id'>text_session</span>
  <span class='@text_session ivar id'>@text_session</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="voice=-instance_method"></span>
      <span id="voice-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="voice-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>voice</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set a couple of Booleans to indicate the session type as a convenience Set
a default voice for speech synthesis Set a default recognizer for speech
recognition
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 10</span>

<span class='def def kw'>def</span> <span class='voice identifier id'>voice</span>
  <span class='@voice ivar id'>@voice</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="voice_session-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="voice_session-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>voice_session</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set a couple of Booleans to indicate the session type as a convenience Set
a default voice for speech synthesis Set a default recognizer for speech
recognition
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 10</span>

<span class='def def kw'>def</span> <span class='voice_session identifier id'>voice_session</span>
  <span class='@voice_session ivar id'>@voice_session</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="method_missing-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>method_missing</strong>(method_id, *args, &amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 17</span>

<span class='def def kw'>def</span> <span class='method_missing identifier id'>method_missing</span><span class='lparen token'>(</span><span class='method_id identifier id'>method_id</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='g identifier id'>g</span> <span class='assign token'>=</span> <span class='Generator constant id'>Generator</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='g identifier id'>g</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='method_id identifier id'>method_id</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="ask-instance_method">
  
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>ask</strong>(params) </span>
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>ask</strong>(params, &amp;block) </span>
    
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='prompt-instance_method'>prompt</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Prompts the user (audio file or text to speech) and optionally waits for a
response from the user. If collected, responses may be in the form of DTMF,
speech recognition or text using a grammar or free-form text.
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>ask</strong>(params) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create an ask action request with.
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:name</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the name to assign to the result when returned to the application, default
is true
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:attempts</span>
          <span class="default">
            
              &mdash; default:
              <tt>1</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the number of times to prompt the user for input
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:bargein</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          &mdash;<div class='inline'><p>
allows a user to enter a key to stop the ask action
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Float</tt>)</span>
          <span class="name">:min_confidence</span>
          <span class="default">
            
              &mdash; default:
              <tt>.5</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the minimum confidence by which to accept the response expressed from 0-1,
as opposed to asking again
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:required</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          &mdash;<div class='inline'><p>
if this is a field that must be completed by the user
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:timeout</span>
          <span class="default">
            
              &mdash; default:
              <tt>30</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the amount of time, in seconds, to wait for a response before moving on
</p>
</div>
        </tr>
      
    </ul>
  

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>ask</strong>(params, &amp;block) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create an ask action request with.
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
        <span class='name'>takes</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a block so that you may trigger actions, such as a say, on a specific event
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:name</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the name to assign to the result when returned to the application
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:attempts</span>
          <span class="default">
            
              &mdash; default:
              <tt>1</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the number of times to prompt the user for input
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:bargein</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          &mdash;<div class='inline'><p>
allows a user to enter a key to stop the ask action
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Float</tt>)</span>
          <span class="name">:min_confidence</span>
          <span class="default">
            
              &mdash; default:
              <tt>.5</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the minimum confidence by which to accept the response expressed from 0-1,
as opposed to asking again
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:required</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          &mdash;<div class='inline'><p>
if this is a field that must be completed by the user
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:timeout</span>
          <span class="default">
            
              &mdash; default:
              <tt>30</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the amount of time, in seconds, to wait for a response before moving on
</p>
</div>
        </tr>
      
    </ul>
  
    
    

</div>
      </li>
    
  </ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
the JSON string to be passed back to Tropo or nil if the method has been
called from inside a block
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79
80
81
82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 73</span>

<span class='def def kw'>def</span> <span class='ask identifier id'>ask</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='params identifier id'>params</span> <span class='assign token'>=</span> <span class='set_language identifier id'>set_language</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='create_nested_hash identifier id'>create_nested_hash</span><span class='lparen token'>(</span><span class='string val'>'ask'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='instance_exec identifier id'>instance_exec</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='@nested_hash ivar id'>@nested_hash</span>
  <span class='else else kw'>else</span>
    <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'ask'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
  <span class='end end kw'>end</span>
  <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="call-instance_method">
  
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>call</strong>(params) </span>
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>ask</strong>(params, &amp;block) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Prompts initiates a new call. May only be used when no call is active.
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>call</strong>(params) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a call action request with.
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:to</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the destination of the call, may be a phone number, SMS number or IM
address
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:from</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the phone number or IM address the call will come from
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:network</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
which network the call will be initiated with, such as SMS
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:channel</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the channel the call will be initiated over, may be TEXT or VOICE
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:timeout</span>
          <span class="default">
            
              &mdash; default:
              <tt>30</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the amount of time, in seconds, to wait for a response before moving on
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:answer_on_media</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          &mdash;<div class='inline'></div>
        </tr>
      
    </ul>
  

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>ask</strong>(params, &amp;block) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create an message action request with.
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
        <span class='name'>takes</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a block so that you may trigger actions, such as a say, on a specific event
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:to</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the destination of the call, may be a phone number, SMS number or IM
address
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:from</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the phone number or IM address the call will come from
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:network</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
which network the call will be initiated with, such as SMS
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:channel</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the channel the call will be initiated over, may be TEXT or VOICE
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:timeout</span>
          <span class="default">
            
              &mdash; default:
              <tt>30</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the amount of time, in seconds, to wait for a response before moving on
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:answer_on_media</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          &mdash;<div class='inline'></div>
        </tr>
      
    </ul>
  
    
    

</div>
      </li>
    
  </ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
the JSON string to be passed back to Tropo or nil if the method has been
called from inside a block
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115
116
117
118
119
120
121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 113</span>

<span class='def def kw'>def</span> <span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='create_nested_hash identifier id'>create_nested_hash</span><span class='lparen token'>(</span><span class='string val'>'call'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='instance_exec identifier id'>instance_exec</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='@nested_hash ivar id'>@nested_hash</span>
  <span class='else else kw'>else</span>
    <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'call'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
  <span class='end end kw'>end</span>
  <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="choices-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>choices</strong>(params = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Choices to give the user on input
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
the options used to construct the grammar for the user
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:value</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the name to assign to the result when returned to the app
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:mode</span>
          <span class="default">
            
              &mdash; default:
              <tt>ANY</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the mode to use when asking the user [DTMF, SPEECH or ANY]
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:term_char</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the user may enter a keypad entry to stop the request
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:type</span>
          <span class="default">
            
              &mdash; default:
              <tt>simple/grammar</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the type of grammar to use
</p>
</div>
        </tr>
      
    </ul>
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138
139
140
141
142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 135</span>

<span class='def def kw'>def</span> <span class='choices identifier id'>choices</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'choices'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
  
  <span class='if if kw'>if</span> <span class='@nested_hash ivar id'>@nested_hash</span>
    <span class='@nested_hash ivar id'>@nested_hash</span><span class='lbrack token'>[</span><span class='@nested_name ivar id'>@nested_name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='merge! fid id'>merge!</span><span class='lparen token'>(</span><span class='hash identifier id'>hash</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
    <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="conference-instance_method">
  
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>conference</strong>(params) </span>
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>conference</strong>(params, &amp;block) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates a conference or pushes a user to an existing conference
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>conference</strong>(params) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a message with.
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:name</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the name to assign to the conference room and to identify events back to
the application
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="name">:id</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the number to assign to the conference room
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:mute</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          &mdash;<div class='inline'><p>
whether to mute this caller in the conference
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:max_time</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the maximum time, in seconds, to allow this user to stay in conference
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:send_tones</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
whether to send the DTMF a user may enter to the audio of the conference
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:exit_tone</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
whether to play a beep when this user exits a conference
</p>
</div>
        </tr>
      
    </ul>
  

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>conference</strong>(params, &amp;block) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a message with.
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
        <span class='name'>takes</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a block so that you may trigger actions, such as a say, on a specific event
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:name</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the name to assign to the conference room and to identify events back to
the application
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="name">:id</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the number to assign to the conference room
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:mute</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          &mdash;<div class='inline'><p>
whether to mute this caller in the conference
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:max_time</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the maximum time, in seconds, to allow this user to stay in conference
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:send_tones</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
whether to send the DTMF a user may enter to the audio of the conference
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:exit_tone</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
whether to play a beep when this user exits a conference
</p>
</div>
        </tr>
      
    </ul>
  
    
    

</div>
      </li>
    
  </ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
the JSON string to be passed back to Tropo or nil if the method has been
called from inside a block
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 168</span>

<span class='def def kw'>def</span> <span class='conference identifier id'>conference</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='create_nested_hash identifier id'>create_nested_hash</span><span class='lparen token'>(</span><span class='string val'>'conference'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='instance_exec identifier id'>instance_exec</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='@nested_hash ivar id'>@nested_hash</span>
  <span class='else else kw'>else</span>
    <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'conference'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
  <span class='end end kw'>end</span>
  <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="hangup-instance_method">
  
    - (<tt>String</tt><sup>?</sup>) <strong>hangup</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='disconnect-instance_method'>disconnect</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
This function instructs Tropo to &quot;hang-up&quot; or disconnect the
current session.
</p>
<p>
May trigger these events:
</p>
<pre class="code">
  <span class='minus op'>-</span> <span class='hangup identifier id'>hangup</span>
  <span class='minus op'>-</span> <span class='error identifier id'>error</span>
</pre>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
returns the JSON string to hangup/stop the current session or nil if the
method has been called from inside a block
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 189</span>

<span class='def def kw'>def</span> <span class='hangup identifier id'>hangup</span>
  <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='lbrace token'>{</span> <span class='symbol val'>:hangup</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span> <span class='rbrace token'>}</span>
  <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span> 
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="message-instance_method">
  
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>message</strong>(params) </span>
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>ask</strong>(params, &amp;block) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Message initiates a new message to a destination and then hangs up on that
destination. Also takes a say method in order to deliver a message to that
desintation and then hangup.
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>message</strong>(params) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a message action request with.
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:to</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the destination of the call, may be a phone number, SMS number or IM
address
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:from</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the phone number or IM address the call will come from
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:network</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
which network the call will be initiated with, such as SMS
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:channel</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the channel the call will be initiated over, may be TEXT or VOICE
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:timeout</span>
          <span class="default">
            
              &mdash; default:
              <tt>30</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the amount of time, in seconds, to wait for a response before moving on
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:answer_on_media</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          &mdash;<div class='inline'></div>
        </tr>
      
    </ul>
  

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>ask</strong>(params, &amp;block) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create an message action request with.
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
        <span class='name'>takes</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a block so that you may trigger actions, such as a say, on a specific event
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:to</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the destination of the call, may be a phone number, SMS number or IM
address
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:from</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the phone number or IM address the call will come from
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:network</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
which network the call will be initiated with, such as SMS
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:channel</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the channel the call will be initiated over, may be TEXT or VOICE
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:timeout</span>
          <span class="default">
            
              &mdash; default:
              <tt>30</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the amount of time, in seconds, to wait for a response before moving on
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:answer_on_media</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          &mdash;<div class='inline'></div>
        </tr>
      
    </ul>
  
    
    

</div>
      </li>
    
  </ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
the JSON string to be passed back to Tropo or nil if the method has been
called from inside a block
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


222
223
224
225
226
227
228
229
230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 222</span>

<span class='def def kw'>def</span> <span class='message identifier id'>message</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='create_nested_hash identifier id'>create_nested_hash</span><span class='lparen token'>(</span><span class='string val'>'message'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='instance_exec identifier id'>instance_exec</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='@nested_hash ivar id'>@nested_hash</span>
  <span class='else else kw'>else</span>
    <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'message'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
  <span class='end end kw'>end</span>
  <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="on-instance_method">
  
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>initialize</strong>(params) </span>
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>initialize</strong>(params, &amp;block) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Sets event handlers to call a REST resource when a particular event occurs
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>initialize</strong>(params) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a message with.
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:event</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the event name that should trigger the callback
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:next</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the resource to send the callback to, such as &#8217;/error.json&#8217;
</p>
</div>
        </tr>
      
    </ul>
  

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>initialize</strong>(params, &amp;block) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a message with.
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
        <span class='name'>takes</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a block so that you may trigger actions, such as a say, on a specific event
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:event</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the event name that should trigger the callback
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:next</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the resource to send the callback to, such as &#8217;/error.json&#8217;
</p>
</div>
        </tr>
      
    </ul>
  
    
    

</div>
      </li>
    
  </ul>

  
    
    
    
    

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 248</span>

<span class='def def kw'>def</span> <span class='on identifier id'>on</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='create_nested_on_hash identifier id'>create_nested_on_hash</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='instance_exec identifier id'>instance_exec</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='@nested_hash ivar id'>@nested_hash</span>
      <span class='@nested_hash ivar id'>@nested_hash</span><span class='lbrack token'>[</span><span class='@nested_name ivar id'>@nested_name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='merge! fid id'>merge!</span><span class='lparen token'>(</span><span class='@nested_on_hash ivar id'>@nested_on_hash</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='create_on_hash identifier id'>create_on_hash</span>
    <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'on'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='@on_hash ivar id'>@on_hash</span><span class='lbrack token'>[</span><span class='symbol val'>:on</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
    <span class='if if kw'>if</span> <span class='@nested_hash ivar id'>@nested_hash</span>
      <span class='@nested_hash ivar id'>@nested_hash</span><span class='lbrack token'>[</span><span class='@nested_name ivar id'>@nested_name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='merge! fid id'>merge!</span><span class='lparen token'>(</span><span class='@on_hash ivar id'>@on_hash</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='lbrace token'>{</span> <span class='symbol val'>:on</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='hash identifier id'>hash</span> <span class='rbrace token'>}</span>
      <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="parse-instance_method">
  
    - (<tt>Hash</tt>) <strong>parse</strong>(json_string) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Parses the JSON string recieved from Tropo into a Ruby Hash
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>a</span>
      
      
      
        &mdash;
        <div class='inline'><p>
JSON string
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
a Hash representing the response from Tropo
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 273</span>

<span class='def def kw'>def</span> <span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='json_string identifier id'>json_string</span><span class='rparen token'>)</span>
  <span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='JSON constant id'>JSON</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='json_string identifier id'>json_string</span><span class='rparen token'>)</span>

  <span class='comment val'># Check to see what type of response we are working with</span>
  <span class='if if kw'>if</span> <span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='string val'>'session'</span><span class='rbrack token'>]</span>
    <span class='transformed_response identifier id'>transformed_response</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='string val'>'session'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span> <span class='rbrace token'>}</span> <span class='rbrace token'>}</span>
    
    <span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='string val'>'session'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each_pair identifier id'>each_pair</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='transform_hash identifier id'>transform_hash</span> <span class='value identifier id'>value</span> <span class='if if_mod kw'>if</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span> <span class='Hash constant id'>Hash</span>
      <span class='transformed_response identifier id'>transformed_response</span><span class='lbrack token'>[</span><span class='string val'>'session'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='merge! fid id'>merge!</span><span class='lparen token'>(</span><span class='transform_pair identifier id'>transform_pair</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    
  <span class='elsif elsif kw'>elsif</span> <span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='string val'>'result'</span><span class='rbrack token'>]</span>
    <span class='transformed_response identifier id'>transformed_response</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='string val'>'result'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span> <span class='rbrace token'>}</span> <span class='rbrace token'>}</span>

    <span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='string val'>'result'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each_pair identifier id'>each_pair</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='transform_hash identifier id'>transform_hash</span> <span class='value identifier id'>value</span> <span class='if if_mod kw'>if</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span> <span class='Hash constant id'>Hash</span>
      <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='transform_array identifier id'>transform_array</span> <span class='value identifier id'>value</span>  <span class='if if_mod kw'>if</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span> <span class='Array constant id'>Array</span>
      <span class='transformed_response identifier id'>transformed_response</span><span class='lbrack token'>[</span><span class='string val'>'result'</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='merge! fid id'>merge!</span><span class='lparen token'>(</span><span class='transform_pair identifier id'>transform_pair</span><span class='lparen token'>(</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='transformed_response identifier id'>transformed_response</span> <span class='assign token'>=</span> <span class='Hashie constant id'>Hashie</span><span class='colon2 op'>::</span><span class='Mash constant id'>Mash</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='transformed_response identifier id'>transformed_response</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="record-instance_method">
  
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>record</strong>(params) </span>
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>record</strong>(params, &amp;block) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Plays a prompt (audio file or text to speech) and optionally waits for a
response from the caller that is recorded. If collected, responses may be
in the form of DTMF or speech recognition using a simple grammar format
defined below. The record funtion is really an alias of the prompt
function, but one which forces the record option to true regardless of how
it is (or is not) initially set. At the conclusion of the recording, the
audio file may be automatically sent to an external server via FTP or an
HTTP POST/Multipart Form. If specified, the audio file may also be
transcribed and the text returned to you via an email address or HTTP
POST/Multipart Form.
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>record</strong>(params) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a message with.
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:name</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the event name that should trigger the callback
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:url</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
a valid URI, an HTTP, FTP or email address to POST the recording file to
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:format</span>
          <span class="default">
            
              &mdash; default:
              <tt>audio/wav</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the audio format to record in, either a wav or mp3
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:username</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
if posting to FTP, the username for the FTP server
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:password</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
if posting to FTP, the password for the FTP server
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Hash</tt>)</span>
          <span class="name">:transcription</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
parameters used to transcribe the recording
</p>
</div>
        </tr>
      
    </ul>
  

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>record</strong>(params, &amp;block) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a message with.
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
        <span class='name'>takes</span>
      
      
      
        &mdash;
        <div class='inline'><p>
a block so that you may trigger actions, such as a say, on a specific event
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:name</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the event name that should trigger the callback
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:url</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
a valid URI, an HTTP, FTP or email address to POST the recording file to
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:format</span>
          <span class="default">
            
              &mdash; default:
              <tt>audio/wav</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the audio format to record in, either a wav or mp3
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:username</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
if posting to FTP, the username for the FTP server
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:password</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
if posting to FTP, the password for the FTP server
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Hash</tt>)</span>
          <span class="name">:transcription</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
parameters used to transcribe the recording
</p>
</div>
        </tr>
      
    </ul>
  
    
    

</div>
      </li>
    
  </ul>

  
    
    
    
    

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


332
333
334
335
336
337
338
339
340
341
342</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 332</span>

<span class='def def kw'>def</span> <span class='record identifier id'>record</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='create_nested_hash identifier id'>create_nested_hash</span><span class='lparen token'>(</span><span class='string val'>'record'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='instance_exec identifier id'>instance_exec</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='@nested_hash ivar id'>@nested_hash</span>
  <span class='else else kw'>else</span>
    <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'record'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
  <span class='end end kw'>end</span>
  <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="redirect-instance_method">
  
    - (<tt>String</tt><sup>?</sup>) <strong>redirect</strong>(params = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The redirect function forwards an incoming call to another destination /
phone number before answering it. The redirect function must be called
before answer is called; redirect expects that a call be in the ringing or
answering state. Use transfer when working with active answered calls.
</p>
<pre class="code">
 <span class='tel identifier id'>tel</span><span class='colon op'>:</span> <span class='classic identifier id'>classic</span> <span class='phone identifier id'>phone</span> <span class='number identifier id'>number</span> <span class='lparen token'>(</span><span class='See constant id'>See</span> <span class='RFC constant id'>RFC</span> <span class='integer val'>2896</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='must identifier id'>must</span> <span class='be identifier id'>be</span> <span class='proceeded identifier id'>proceeded</span> <span class='by identifier id'>by</span> <span class='a identifier id'>a</span> <span class='plus op'>+</span> <span class='and and kw'>and</span> <span class='the identifier id'>the</span> <span class='country identifier id'>country</span> <span class='code identifier id'>code</span> <span class='lparen token'>(</span><span class='ie identifier id'>ie</span> <span class='minus op'>-</span> <span class='integer val'>+14155551212</span> <span class='for for kw'>for</span> <span class='a identifier id'>a</span> <span class='US constant id'>US</span> <span class='comment val'>#)</span>
 <span class='sip identifier id'>sip</span><span class='colon op'>:</span> <span class='Session constant id'>Session</span> <span class='Initiation constant id'>Initiation</span> <span class='Protocol constant id'>Protocol</span> <span class='lparen token'>(</span><span class='SIP constant id'>SIP</span><span class='rparen token'>)</span> <span class='address identifier id'>address</span>
</pre>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
the options to create a message with.
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>required</tt>, <tt>String</tt>)</span>
          <span class="name">:to</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
where to redirect the session to
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:from</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
set the from id for the session when redirecting
</p>
</div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
the JSON string to redirect the current session or nil if the method has
been called from inside a block
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


357
358
359
360
361</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 357</span>

<span class='def def kw'>def</span> <span class='redirect identifier id'>redirect</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'redirect'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
  <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
  <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reject-instance_method">
  
    - (<tt>String</tt><sup>?</sup>) <strong>reject</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Allows Tropo applications to reject incoming calls before they are
answered. For example, an application could inspect the callerID variable
to determine if the caller is known, and then use the reject call
accordingly.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
the JSON string to reject the current session or nil if the method has been
called from inside a block
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


370
371
372
373</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 370</span>

<span class='def def kw'>def</span> <span class='reject identifier id'>reject</span>
  <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='lbrace token'>{</span> <span class='symbol val'>:reject</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span> <span class='rbrace token'>}</span>
  <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset-instance_method">
  
    - (<tt>nil</tt>) <strong>reset</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Resets the action hash if one desires to reuse the same Generator object
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


387
388
389
390
391</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 387</span>

<span class='def def kw'>def</span> <span class='reset identifier id'>reset</span>
  <span class='@response ivar id'>@response</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='symbol val'>:tropo</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Array constant id'>Array</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='rbrace token'>}</span>
  <span class='@voice_session ivar id'>@voice_session</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
  <span class='@text_session ivar id'>@text_session</span> <span class='assign token'>=</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="response-instance_method">
  
    - (<tt>String</tt>) <strong>response</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Renders the JSON string to be sent to Tropo to execute a set of actions
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
the JSON string to be sent to the Tropo Remote API
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


379
380
381</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 379</span>

<span class='def def kw'>def</span> <span class='response identifier id'>response</span>
  <span class='@response ivar id'>@response</span><span class='dot token'>.</span><span class='to_json identifier id'>to_json</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="say-instance_method">
  
    
      <span class="overload">- (<tt>String</tt><sup>?</sup>) <strong>say</strong>(params) </span>
    
      <span class="overload">- (<tt>String</tt><sup>?</sup>) <strong>say</strong>(value, params) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Plays a prompt (audio file, text to speech or text for IM/SMS). There is no
ability to wait for a response from a user. An audio file used for playback
may be in one of the following two formats:
</p>
<pre class="code">
 <span class='Wav constant id'>Wav</span> <span class='integer val'>8</span><span class='bit identifier id'>bit</span> <span class='integer val'>8</span><span class='khz identifier id'>khz</span> <span class='Ulaw constant id'>Ulaw</span>
 <span class='MP3 constant id'>MP3</span>
</pre>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>String</tt><sup>?</sup>) <strong>say</strong>(params) </span>
        <div class="docstring">
  <div class="discussion">
    <p>
The JSON string to be passed back to Tropo or nil if the method has been
called from inside a block
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a message with.
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:value</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the text or audio to be spoken or played back to the user
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="name">:event</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
assigns a callback when a particular event occurs
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="name">:as</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
instructs the engine on how to handle the grammar
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="name">:format</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
instructs the engine on how to handle the grammar
</p>
</div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
the JSON string to be passed back to Tropo or nil if the method has been
called from inside a block
</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>String</tt><sup>?</sup>) <strong>say</strong>(value, params) </span>
        <div class="docstring">
  <div class="discussion">
    <p>
The JSON string to be passed back to Tropo or nil if the method has been
called from inside a block
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>the</span>
      
      
      
        &mdash;
        <div class='inline'><p>
text or audio to be spoken or played back to the user
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a message with.
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="name">:event</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
assigns a callback when a particular event occurs
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="name">:as</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
instructs the engine on how to handle the grammar
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="name">:format</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
instructs the engine on how to handle the grammar
</p>
</div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
the JSON string to be passed back to Tropo or nil if the method has been
called from inside a block
</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 415</span>

<span class='def def kw'>def</span> <span class='say identifier id'>say</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  
  <span class='comment val'># This will allow a string to be passed to the say, as opposed to always having to specify a :value key/pair,</span>
  <span class='comment val'># or still allow a hash or Array to be passed as well</span>
  <span class='if if kw'>if</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span> <span class='String constant id'>String</span>
    <span class='params identifier id'>params</span><span class='lbrack token'>[</span><span class='symbol val'>:value</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span>
  <span class='elsif elsif kw'>elsif</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span> <span class='Hash constant id'>Hash</span>
    <span class='params identifier id'>params</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span>
  <span class='elsif elsif kw'>elsif</span> <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span> <span class='Array constant id'>Array</span>
    <span class='params identifier id'>params</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span>
  <span class='else else kw'>else</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;An invalid paramater type #{value.class} has been passed&quot;</span>
  <span class='end end kw'>end</span>
  
  <span class='response identifier id'>response</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='symbol val'>:say</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Array constant id'>Array</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='rbrace token'>}</span>

  <span class='if if kw'>if</span> <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span> <span class='Array constant id'>Array</span>
    <span class='params identifier id'>params</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='param identifier id'>param</span><span class='bitor op'>|</span>
      <span class='param identifier id'>param</span> <span class='assign token'>=</span> <span class='set_language identifier id'>set_language</span><span class='lparen token'>(</span><span class='param identifier id'>param</span><span class='rparen token'>)</span>
      <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'say'</span><span class='comma token'>,</span> <span class='param identifier id'>param</span><span class='rparen token'>)</span>
      <span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='symbol val'>:say</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='params identifier id'>params</span> <span class='assign token'>=</span> <span class='set_language identifier id'>set_language</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'say'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='response identifier id'>response</span><span class='lbrack token'>[</span><span class='symbol val'>:say</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
  <span class='end end kw'>end</span>
  
  <span class='if if kw'>if</span> <span class='@nested_hash ivar id'>@nested_hash</span> <span class='andop op'>&amp;&amp;</span> <span class='@nested_on_hash ivar id'>@nested_on_hash</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='@nested_hash ivar id'>@nested_hash</span><span class='lbrack token'>[</span><span class='@nested_name ivar id'>@nested_name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='merge! fid id'>merge!</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
  <span class='elsif elsif kw'>elsif</span> <span class='@nested_on_hash ivar id'>@nested_on_hash</span>
    <span class='@nested_on_hash ivar id'>@nested_on_hash</span><span class='lbrack token'>[</span><span class='symbol val'>:on</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='@nested_on_hash_cnt ivar id'>@nested_on_hash_cnt</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='merge! fid id'>merge!</span><span class='lparen token'>(</span><span class='response identifier id'>response</span><span class='rparen token'>)</span>
    <span class='@nested_on_hash_cnt ivar id'>@nested_on_hash_cnt</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
  <span class='else else kw'>else</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='response identifier id'>response</span>
    <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="start_recording-instance_method">
  
    - (<tt>String</tt><sup>?</sup>) <strong>start_recording</strong>(params = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Allows Tropo applications to begin recording the current session. The
resulting recording may then be sent via FTP or an HTTP POST/Multipart
Form.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
the options to create a message with.
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:url</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
a valid URI, an HTTP, FTP or email address to POST the recording file to
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:format</span>
          <span class="default">
            
              &mdash; default:
              <tt>audio/wav</tt>
            
          </span>
          &mdash;<div class='inline'><p>
the audio format to record in, either a wav or mp3
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:username</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
if posting to FTP, the username for the FTP server
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:password</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
if posting to FTP, the password for the FTP server
</p>
</div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
returns the JSON string to start the recording of a session or nil if the
method has been called from inside a block
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


465
466
467
468
469
470
471
472
473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 465</span>

<span class='def def kw'>def</span> <span class='start_recording identifier id'>start_recording</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='create_nested_hash identifier id'>create_nested_hash</span><span class='lparen token'>(</span><span class='string val'>'start_recording'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='instance_exec identifier id'>instance_exec</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='@nested_hash ivar id'>@nested_hash</span>
  <span class='else else kw'>else</span>
    <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'start_recording'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
  <span class='end end kw'>end</span>
  <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stop_recording-instance_method">
  
    - (<tt>String</tt><sup>?</sup>) <strong>stop_recording</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Stops the recording of the current session after startCallRecording has
been called
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
returns the JSON string to stop the recording of a session or nil if the
method has been called from inside a block
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


482
483
484
485</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 482</span>

<span class='def def kw'>def</span> <span class='stop_recording identifier id'>stop_recording</span>
  <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='lbrace token'>{</span> <span class='symbol val'>:stopRecording</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span> <span class='rbrace token'>}</span>
  <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="transfer-instance_method">
  
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>transfer</strong>(params) </span>
    
      <span class="overload">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>transfer</strong>(params, &amp;block) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Transfers an already answered call to another destination / phone number.
Call may be transferred to another phone number or SIP address, which is
set through the &quot;to&quot; parameter and is in URL format. Supported
formats include:
</p>
<pre class="code">
 <span class='tel identifier id'>tel</span><span class='colon op'>:</span> <span class='classic identifier id'>classic</span> <span class='phone identifier id'>phone</span> <span class='number identifier id'>number</span> <span class='lparen token'>(</span><span class='See constant id'>See</span> <span class='RFC constant id'>RFC</span> <span class='integer val'>2896</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='must identifier id'>must</span> <span class='be identifier id'>be</span> <span class='proceeded identifier id'>proceeded</span> <span class='by identifier id'>by</span> <span class='a identifier id'>a</span> <span class='plus op'>+</span> <span class='and and kw'>and</span> <span class='the identifier id'>the</span> <span class='country identifier id'>country</span> <span class='code identifier id'>code</span> <span class='lparen token'>(</span><span class='ie identifier id'>ie</span> <span class='minus op'>-</span> <span class='integer val'>+14155551212</span> <span class='for for kw'>for</span> <span class='a identifier id'>a</span> <span class='US constant id'>US</span> <span class='comment val'>#)</span>
 <span class='sip identifier id'>sip</span><span class='colon op'>:</span> <span class='SIP constant id'>SIP</span> <span class='protocol identifier id'>protocol</span> <span class='address identifier id'>address</span>
</pre>
<p>
When this method is called the following occurs:
</p>
<pre class="code">
 <span class='The constant id'>The</span> <span class='audio identifier id'>audio</span> <span class='file identifier id'>file</span> <span class='specified identifier id'>specified</span> <span class='in in kw'>in</span> <span class='playvalue identifier id'>playvalue</span> <span class='is identifier id'>is</span> <span class='played identifier id'>played</span> <span class='to identifier id'>to</span> <span class='the identifier id'>the</span> <span class='existing identifier id'>existing</span> <span class='call identifier id'>call</span><span class='dot token'>.</span> <span class='This constant id'>This</span> <span class='could identifier id'>could</span> <span class='be identifier id'>be</span> <span class='string val'>&quot;hold music&quot;</span><span class='comma token'>,</span> <span class='a identifier id'>a</span> <span class='ring identifier id'>ring</span><span class='minus op'>-</span><span class='back identifier id'>back</span> <span class='sound identifier id'>sound</span><span class='comma token'>,</span> <span class='etc identifier id'>etc</span><span class='dot token'>.</span> <span class='The constant id'>The</span> <span class='audio identifier id'>audio</span> <span class='file identifier id'>file</span> <span class='is identifier id'>is</span> <span class='played identifier id'>played</span> <span class='up identifier id'>up</span> <span class='to identifier id'>to</span> <span class='playrepeat identifier id'>playrepeat</span> <span class='times identifier id'>times</span><span class='dot token'>.</span>
 <span class='While constant id'>While</span> <span class='audio identifier id'>audio</span> <span class='is identifier id'>is</span> <span class='playing identifier id'>playing</span><span class='comma token'>,</span> <span class='a identifier id'>a</span> <span class='new identifier id'>new</span> <span class='call identifier id'>call</span> <span class='is identifier id'>is</span> <span class='initiated identifier id'>initiated</span> <span class='to identifier id'>to</span> <span class='the identifier id'>the</span> <span class='specified identifier id'>specified</span> <span class='string val'>&quot;to&quot;</span> <span class='address identifier id'>address</span> <span class='using identifier id'>using</span> <span class='the identifier id'>the</span> <span class='callerID identifier id'>callerID</span> <span class='specified identifier id'>specified</span><span class='dot token'>.</span>
 <span class='If constant id'>If</span> <span class='answerOnMedia identifier id'>answerOnMedia</span> <span class='is identifier id'>is</span> <span class='true true kw'>true</span><span class='comma token'>,</span> <span class='the identifier id'>the</span> <span class='audio identifier id'>audio</span> <span class='from identifier id'>from</span> <span class='the identifier id'>the</span> <span class='new identifier id'>new</span> <span class='call identifier id'>call</span> <span class='is identifier id'>is</span> <span class='connected identifier id'>connected</span> <span class='to identifier id'>to</span> <span class='the identifier id'>the</span> <span class='existing identifier id'>existing</span> <span class='call identifier id'>call</span> <span class='immediately identifier id'>immediately</span><span class='dot token'>.</span>
 <span class='The constant id'>The</span> <span class='system identifier id'>system</span> <span class='waits identifier id'>waits</span> <span class='for for kw'>for</span> <span class='an identifier id'>an</span> <span class='answer identifier id'>answer</span> <span class='or or kw'>or</span> <span class='other identifier id'>other</span> <span class='event identifier id'>event</span> <span class='from identifier id'>from</span> <span class='the identifier id'>the</span> <span class='new identifier id'>new</span> <span class='call identifier id'>call</span> <span class='up identifier id'>up</span> <span class='to identifier id'>to</span> <span class='the identifier id'>the</span> <span class='timeout identifier id'>timeout</span><span class='dot token'>.</span>
 <span class='If constant id'>If</span> <span class='the identifier id'>the</span> <span class='call identifier id'>call</span> <span class='successfully identifier id'>successfully</span> <span class='completes identifier id'>completes</span> <span class='within identifier id'>within</span> <span class='the identifier id'>the</span> <span class='timeout identifier id'>timeout</span><span class='comma token'>,</span> <span class='the identifier id'>the</span> <span class='existing identifier id'>existing</span> <span class='call identifier id'>call</span> <span class='and and kw'>and</span> <span class='new identifier id'>new</span> <span class='call identifier id'>call</span> <span class='will identifier id'>will</span> <span class='be identifier id'>be</span> <span class='connected identifier id'>connected</span><span class='comma token'>,</span> <span class='onSuccess identifier id'>onSuccess</span> <span class='will identifier id'>will</span> <span class='be identifier id'>be</span> <span class='called identifier id'>called</span><span class='comma token'>,</span> <span class='and and kw'>and</span> <span class='the identifier id'>the</span> <span class='transfer identifier id'>transfer</span> <span class='call identifier id'>call</span> <span class='will identifier id'>will</span> <span class='return return kw'>return</span> <span class='a identifier id'>a</span> <span class='success identifier id'>success</span> <span class='event identifier id'>event</span><span class='dot token'>.</span>
 <span class='If constant id'>If</span> <span class='the identifier id'>the</span> <span class='call identifier id'>call</span> <span class='fails identifier id'>fails</span> <span class='before identifier id'>before</span> <span class='the identifier id'>the</span> <span class='timeout identifier id'>timeout</span><span class='comma token'>,</span> <span class='onCallFailure identifier id'>onCallFailure</span> <span class='will identifier id'>will</span> <span class='be identifier id'>be</span> <span class='called identifier id'>called</span> <span class='and and kw'>and</span> <span class='the identifier id'>the</span> <span class='method identifier id'>method</span> <span class='will identifier id'>will</span> <span class='return return kw'>return</span> <span class='an identifier id'>an</span> <span class='onCallFailure identifier id'>onCallFailure</span> <span class='event identifier id'>event</span><span class='dot token'>.</span>
 <span class='If constant id'>If</span> <span class='the identifier id'>the</span> <span class='call identifier id'>call</span> <span class='fails identifier id'>fails</span> <span class='due identifier id'>due</span> <span class='to identifier id'>to</span> <span class='the identifier id'>the</span> <span class='timeout identifier id'>timeout</span> <span class='elapsing identifier id'>elapsing</span><span class='comma token'>,</span> <span class='onTimeout identifier id'>onTimeout</span> <span class='will identifier id'>will</span> <span class='be identifier id'>be</span> <span class='called identifier id'>called</span> <span class='and and kw'>and</span> <span class='the identifier id'>the</span> <span class='method identifier id'>method</span> <span class='will identifier id'>will</span> <span class='return return kw'>return</span> <span class='a identifier id'>a</span> <span class='timeout identifier id'>timeout</span> <span class='event identifier id'>event</span>
</pre>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>transfer</strong>(params) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a transfer action request with
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:name</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the name to assign to the result when returned to the application, default
is true
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:answer_on_media</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
???
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:answer_timeout</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the amount of time to ring the far side before giving up and going to the
next step
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:required</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          &mdash;<div class='inline'><p>
???
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>required</tt>, <tt>String</tt>)</span>
          <span class="name">:to</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
where to redirect the session to
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:from</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
set the from id for the session when redirecting
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:ring_repeat</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
???
</p>
</div>
        </tr>
      
    </ul>
  

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>transfer</strong>(params, &amp;block) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>params</span>
      
      
      
        &mdash;
        <div class='inline'><p>
the options to create a transfer action request with
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>params</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>String</tt>)</span>
          <span class="name">:name</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the name to assign to the result when returned to the application, default
is true
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:answer_on_media</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
???
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:answer_timeout</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
the amount of time to ring the far side before giving up and going to the
next step
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Boolean</tt>)</span>
          <span class="name">:required</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          &mdash;<div class='inline'><p>
???
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>required</tt>, <tt>String</tt>)</span>
          <span class="name">:to</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
where to redirect the session to
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>String</tt>)</span>
          <span class="name">:from</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
set the from id for the session when redirecting
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>optional</tt>, <tt>Integer</tt>)</span>
          <span class="name">:ring_repeat</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
???
</p>
</div>
        </tr>
      
    </ul>
  
    
    

</div>
      </li>
    
  </ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>, <tt>String</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


522
523
524
525
526
527
528
529
530
531
532</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tropo-webapi-ruby/tropo-webapi-ruby.rb', line 522</span>

<span class='def def kw'>def</span> <span class='transfer identifier id'>transfer</span><span class='lparen token'>(</span><span class='params identifier id'>params</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='block_given? fid id'>block_given?</span>
    <span class='create_nested_hash identifier id'>create_nested_hash</span><span class='lparen token'>(</span><span class='string val'>'transfer'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='instance_exec identifier id'>instance_exec</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='@nested_hash ivar id'>@nested_hash</span>
  <span class='else else kw'>else</span>
    <span class='hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='build_action identifier id'>build_action</span><span class='lparen token'>(</span><span class='string val'>'transfer'</span><span class='comma token'>,</span> <span class='params identifier id'>params</span><span class='rparen token'>)</span>
    <span class='@response ivar id'>@response</span><span class='lbrack token'>[</span><span class='symbol val'>:tropo</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='hash identifier id'>hash</span>
  <span class='end end kw'>end</span>
  <span class='render_response identifier id'>render_response</span> <span class='if if_mod kw'>if</span> <span class='@building ivar id'>@building</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Fri May 14 13:57:03 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.4 (ruby-1.8.7).
</div>

  </body>
</html>